<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		canvas {
			border: 1px solid #000
		}
	</style>
</head>
<body>
	<button id="prev">Prev</button>
	<button id="next">Next</button>
	<span id="npages">not yet</span>
	<div>
		<canvas id="cnv"></canvas>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>
	<script>
		function getPageText(pageNum, PDFDocumentInstance) {
			// Return a Promise that is solved once the text of the page is retrieven
			return new Promise(function (resolve, reject) {
				PDFDocumentInstance.getPage(pageNum).then(function (pdfPage) {
					// The main trick to obtain the text of the PDF page, use the getTextContent method
					pdfPage.getTextContent().then(function (textContent) {
						var textItems = textContent.items;
						var finalString = "";
						// Concatenate the string of the item to the final string
						for (var i = 0; i < textItems.length; i++) {
							var item = textItems[i];
							finalString += item.str + " ";
						}
						// Solve promise with the text retrieven from the page
						resolve(finalString);
					});
				});
			});
		}
		var PDF_URL = '../mypdf/helloworld.pdf';
		PDFJS.getDocument(PDF_URL).then(function (PDFDocumentInstance) {
			var totalPages = PDFDocumentInstance.numPages;
			var pageNumber = 1;
			getPageText(pageNumber, PDFDocumentInstance).then(function (textPage) { console.log(textPage); });

		}, function (reason) {
			// PDF loading error
			console.error(reason);
		});







			//const PDFStart = nameRoute => {
			//	let loadingTask = pdfjsLib.getDocument(nameRoute),
			//		pdfDoc = null,
			//		canvas = document.querySelector('#cnv'),
			//		ctx = canvas.getContext('2d'),
			//		scale = 1.5,
			//		numPage = 1;
			//	const GeneratePDF = numPage => {
			//		pdfDoc.getPage(numPage).then(page => {
			//			let viewport = page.getViewport({ scale: scale });
			//			canvas.height = viewport.height;
			//			canvas.width = viewport.width;
			//			let renderContext = { canvasContext: ctx, viewport: viewport }
			//			page.render(renderContext);
			//		})
			//		document.querySelector('#npages').innerHTML = numPage;
			//	}
			//	const PrevPage = () => {
			//		if (numPage === 1) {
			//			return
			//		}
			//		numPage--;
			//		GeneratePDF(numPage);
			//	}
			//	const NextPage = () => {
			//		if (numPage >= pdfDoc.numPages) {
			//			return
			//		}
			//		numPage++;
			//		GeneratePDF(numPage);
			//	}
			//	document.querySelector('#prev').addEventListener('click', PrevPage)
			//	document.querySelector('#next').addEventListener('click', NextPage)
			//	loadingTask.promise.then(pdfDoc_ => {
			//		pdfDoc = pdfDoc_;
			//		document.querySelector('#npages').innerHTML = pdfDoc.numPages;
			//		GeneratePDF(numPage)
			//	});
			//}
			//const startPdf = () => {
			//	PDFStart('../mypdf/helloworld.pdf')
			//}
			//window.addEventListener('load', startPdf);
	</script>
</body>
</html>